<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GAMS Data eXchange (GDX) API: GAMS Data eXchange (GDX)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">GAMS Data eXchange (GDX) API
   </div>
   <div id="projectbrief">Low-level &quot;eXPert level&quot; C++ API for reading and writing GAMS Data eXchange files</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GAMS Data eXchange (GDX) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README_filtered"></a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Basic information on GDX file format</h1>
<p >The <a href="https://www.gams.com/latest/docs/UG_MAIN.html#UG_Language_Environment">GAMS modeling language</a> is a domain specific language tailored towards mathematical optimization. The language reflects the basic building blocks (symbols) of an algebraic optimization model:</p>
<ul>
<li><a href="https://www.gams.com/latest/docs/UG_SetDefinition.html">Sets</a>,</li>
<li><a href="https://www.gams.com/latest/docs/UG_Parameters.html">parameters</a>,</li>
<li><a href="https://www.gams.com/latest/docs/UG_DataEntry.html#UG_DataEntry_Scalars">scalars</a>,</li>
<li><a href="https://www.gams.com/latest/docs/UG_Variables.html">decision variables</a>,</li>
<li>and <a href="https://www.gams.com/latest/docs/UG_Equations.html">equations</a>.</li>
</ul>
<p >While declaring the symbols in the GAMS language is rather straightforward and concise, defining their values (which must be done prior to running the optimization for exogenous symbols like sets, parameters and scalars) might be comparatively cumbersome. In many applications, the actual data for the symbols is also already stored in some other location like a file or database. In order to have an efficient way to load data into a model, store the solution results and in general exchange information with other applications, the <a href="https://www.gams.com/latest/docs/UG_GDX.html">GDX file format</a> was conceived.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Information contained inside a GDX file</h2>
<ul>
<li>Unique elements (strings used to identify set elements)</li>
<li>Acronyms as shorthand names for specific numeric values</li>
<li>Symbols<ul>
<li>with their attributes...<ul>
<li>Type: Set, Alias, Parameter, Scalar, Variable, Equation</li>
<li>Dimensionality</li>
<li>User info</li>
<li>Explanatory text</li>
</ul>
</li>
<li>...and data (records)</li>
</ul>
</li>
</ul>
<p >Records are mapping from the domain of the symbol to the value space with up to 5 fields (level, marginal, lower bound, upper bound, scale)</p>
<p >The actual data might be stored verbatim or compressed (using zlib).</p>
<p ><em>Please note:</em> a GDX file does <b>not</b> store a model formulation or executable statements.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Features of the GDX API</h2>
<p >For efficiency reasons (both read/write-speeds and disk usage) the GDX format is a binary format that cannot be easily processed using a text editor. Hence, looking at the contents of a GDX file is ideally done via a graphical user interface like the GDX viewer included in GAMS Studio or the <code>gdxdump</code> console utility included in the GAMS distribution. In order to write conversion utilities between GDX and various other data file formats, an API is needed. This API has the following features:</p>
<ul>
<li>Reading list of symbols and UELs</li>
<li>Reading data from a symbol (metadata, records)</li>
<li>Writing a new symbol (metadata, records)</li>
<li>Bindings to multiple languages</li>
</ul>
<p >The GDX API is very powerful with fine-grained control and is also used at GAMS internally.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Setting up and building GDX</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Accessing GDX from a custom application</h2>
<p >The GDX API can be directly accessed from C/C++ via the library contained in this repository. Although there is a main GDX object for representing a file in this interface, it is mostly procedural and offers many functions operating on elementary data types instead of a sophisticated class hierarchy.</p>
<p >For an easier to use object-oriented interface GAMS offers wrappers for multiple programming languages including:</p>
<ul>
<li><a href="https://www.gams.com/latest/docs/API_CPP_OVERVIEW.html">C++</a> with source code available on <a href="https://git.gams.com/devel/gams-cpp">GitHub</a></li>
<li><a href="https://www.gams.com/latest/docs/apis/dotnet/DOTNET_OVERVIEW.html">.NET</a> (Visual Basic, C#)</li>
<li><a href="https://www.gams.com/latest/docs/API_JAVA_OVERVIEW.html">Java</a></li>
<li><a href="https://www.gams.com/latest/docs/API_PY_CONTROL.html">Python</a></li>
</ul>
<p >Even more abstraction is offered by the GAMS Transfer libraries for <a href="https://www.gams.com/latest/docs/API_PY_GAMSTRANSFER.html">Python</a> and <a href="https://www.gams.com/latest/docs/API_R_GAMSTRANSFER.html">R</a>.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Building GDX from source</h2>
<p >The GDX library is written in C++17 and built via <a href="https://cmake.org/">CMake</a>.</p>
<p >This repository contains a GitLab CI YAML that describes a pipeline which</p>
<ul>
<li>builds GDX for all supported platforms (Windows, macOS, Linux) with Doxygen documentation, libraries, and examples,</li>
<li>runs its unit test suite,</li>
<li>checks for memory leaks with <a href="https://valgrind.org/docs/manual/mc-manual.html">valgrind memcheck</a>,</li>
<li>and checks for performance regressions against GAMS 43 legacy Delphi GDX library.</li>
</ul>
<p >Please run</p>
<div class="fragment"><div class="line">git clone https://github.com/madler/zlib zlib</div>
</div><!-- fragment --><p >inside the root-directory of the <code>gdx</code>-repository to make the zlib compression library available.</p>
<p ><a href="https://github.com/doctest/doctest">doctest</a> and <a href="https://github.com/GAMS-dev/apigenerator">apigenerator</a> are included in this repo (as file and submodule respectively).</p>
<p ><b>Dependencies</b>:</p>
<ul>
<li><a href="https://github.com/madler/zlib">zlib</a> (compression library)</li>
<li><a href="https://github.com/doctest/doctest">doctest</a></li>
</ul>
<p ><b>Build tools</b>:</p>
<ul>
<li><a href="https://github.com/GAMS-dev/apigenerator">GAMS API generator</a> (language binding/wrapper tool)</li>
<li><a href="https://cmake.org/">CMake</a> (build system)</li>
<li>C++17 compiler (e.g. <a href="https://gcc.gnu.org/">GCC</a>, <a href="https://clang.llvm.org/">clang</a>, <a href="https://visualstudio.microsoft.com/">MSVC</a>, <a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/dpc-compiler.html#gs.12zqsa">Intel C++</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Reference documentation</h1>
<p >A full detailed Doxygen-generated API reference is available <a href="https://gams-dev.github.io/gdx/classgdx_1_1TGXFileObj.html">here</a>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Introduction into using GDX API</h1>
<p >This document describes the Application Programmers Interface (API) for the GDX library. The GDX library is used to read or write GDX files. A GDX file is a file that stores the values of one or more GAMS symbols such as sets, parameters, variables, and equations. GDX files can be used to prepare data for a GAMS model, present results of a GAMS model, store results of the same model using different parameters etc. A GDX file does not store a model formulation or executable statements.</p>
<p >GDX files are binary files that are portable between different platforms. They are written using the byte ordering native to the hardware platform they are created on, but can be read on a platform using a different byte ordering.</p>
<p >To read or write data, we need to be able to reference the set elements used to represent the index space for symbols with one or more dimensions. The API provides three interface models for this purpose:</p>
<ol type="1">
<li>The <b>String</b> based interface. An <code>n</code> dimensional element is represented as an array of strings.</li>
<li>The <b>Raw</b> integer interface. An <code>n</code> dimensional element is represented as an array of integers. The integer used for each index position is obtained from the API after registering the string representation with the API.</li>
<li>The <b>Mapped</b> integer interface. An <code>n</code> dimensional element is represented as an array of integers. The integer used for each index position is defined by the user. Before such an element can be used, its value and string has to be registered.</li>
</ol>
<h2><a class="anchor" id="autotoc_md9"></a>
Writing data to a GDX file</h2>
<p >Creating a GDX file and writing one or more symbols to the file requires a number of steps:</p>
<ol type="1">
<li>Make sure the GDX library is available</li>
<li>Open a file for writing</li>
<li>Register unique elements</li>
<li>Start writing a symbol</li>
<li>Write the data</li>
<li>Finish writing for the symbol</li>
<li>Optional: share acronyms</li>
<li>Close the file</li>
<li>Unload the GDX library</li>
</ol>
<p >Steps 3 - 6 can be repeated to write any number of symbols to the file. Once a symbol has been written to the file, it cannot be replaced. Currently, there are no facilities to overwrite a symbol or append data to an existing file.</p>
<p >The following sections illustrate the basic steps for each type of interface. The method of writing (string, raw, or mapped) can be selected for each symbol; it cannot be changed while writing a symbol.</p>
<p >Most code samples reference the following auxiliary function <code>ReportGDXError</code> to report the latest GDX error when the most recent call to the GDX API has reported a problem (usually by returning <code>false</code>).</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ReportGDXError(TGXFileObj &amp;gdx) {</div>
<div class="line">  std::array&lt;char, GMS_SSSIZE&gt; S;</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;**** Fatal GDX Error&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  gdx.gdxErrorStr(gdx.gdxGetLastError(), S.data());</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;**** &quot;</span> &lt;&lt; S.data() &lt;&lt; std::endl;</div>
<div class="line">  exit(1);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Writing data using strings</h2>
<p >The String based interface is suitable when we want to use a string based index and do not want to maintain a mapping from strings to integers.</p>
<p >Before writing data using a string based interface we can register strings for the unique elements, but this step is <em>optional</em>. The only reason to register the strings beforehand is to enter the strings in a given order which may have advantages later in the modelling stage.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataWriteStrStart(<span class="stringliteral">&quot;Demand&quot;</span>,<span class="stringliteral">&quot;Demand data&quot;</span>,1,dt_par,0))</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">IndxS[0] = <span class="stringliteral">&quot;New-York&quot;</span>;</div>
<div class="line">Values[0] = 324.0;</div>
<div class="line">gdx.gdxDataWriteStr(IndxS,Values);</div>
<div class="line"> </div>
<div class="line">IndxS[0] = <span class="stringliteral">&quot;Chicago&quot;</span>;</div>
<div class="line">Values[0] = 299.0;</div>
<div class="line">gdx.gdxDataWriteStr(IndxS,Values);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataWriteDone())</div>
<div class="line">   ReportGDXError();</div>
</div><!-- fragment --><p >In this example we write two records for a parameter that has a dimension of one.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Writing data using integers (raw)</h2>
<p >The Raw interface is suitable when we want to manage our own list of unique elements, and use an integer based index. The Raw interface assumes that the integers assigned to the strings range from one to the number of strings registered.</p>
<p >Before we can write data using the Raw interface, we have to register the strings for the unique elements. The GDX routines will assign an integer to the string that increases by one for every string registered.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!gdx.gdxUELRegisterRawStart())</div>
<div class="line">   ReportGDXError();</div>
<div class="line">gdx.gdxUELRegisterRaw(<span class="stringliteral">&quot;New-York&quot;</span>);</div>
<div class="line">gdx.gdxUELRegisterRaw(<span class="stringliteral">&quot;Chicago&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxUELRegisterDone())</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataWriteRawStart(<span class="stringliteral">&quot;Demand&quot;</span>,<span class="stringliteral">&quot;Demand data&quot;</span>,1,dt_par,0))</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">IndxI[0] = 1;</div>
<div class="line">Values[0] = 324.0;</div>
<div class="line">gdx.gdxDataWriteRaw(IndxI,Values);</div>
<div class="line"> </div>
<div class="line">IndxI[0] = 2;</div>
<div class="line">Values[0] = 299.0;</div>
<div class="line">gdx.gdxDataWriteRaw(IndxI,Values);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataWriteDone())</div>
<div class="line">    ReportGDXError();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Writing data using integers (mapped)</h2>
<p >The Mapped interface is suitable when we want to manage our <em>own</em> list of unique elements, and use an integer based index. The mapped interface lets us select our own mapping between strings for the unique elements and their integer equivalent. The integers assigned to the unique elements should be greater equal one, and be unique for each element.</p>
<p >Before we can write data using the Mapped interface, we have to register the strings for the unique elements.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!gdx.gdxUELRegisterMapStart())</div>
<div class="line">   ReportGDXError();</div>
<div class="line">gdx.gdxUELRegisterMap(1000,<span class="stringliteral">&quot;New-York&quot;</span>);</div>
<div class="line">gdx.gdxUELRegisterMap(2000,<span class="stringliteral">&quot;Chicago&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxUELRegisterDone())</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataWriteMapStart(<span class="stringliteral">&quot;Demand&quot;</span>,<span class="stringliteral">&quot;Demand data&quot;</span>,1,dt_par,0))</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">IndxI[0] = 1000;</div>
<div class="line">Values[0] = 324.0;</div>
<div class="line">gdx.gdxDataWriteRaw(IndxI,Values);</div>
<div class="line"> </div>
<div class="line">IndxI[0] = 2000;</div>
<div class="line">Values[0] = 299.0;</div>
<div class="line">gdx.gdxDataWriteRaw(IndxS,Values);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataWriteDone())</div>
<div class="line">    ReportGDXError();</div>
</div><!-- fragment --><p >In this example we register two unique elements, and write a parameter of dimension one.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Reading data from a GDX file</h2>
<p >Opening an existing GDX file and reading one or more symbols from the file requires a number of steps:</p>
<ol type="1">
<li>Make sure the GDX library is available</li>
<li>Open a file for reading</li>
<li>Optional: share acronyms</li>
<li>Register unique elements</li>
<li>Start reading a symbol</li>
<li>Read the data</li>
<li>Finish reading for the symbol</li>
<li>Close the file</li>
<li>Unload the GDX library</li>
</ol>
<p >Steps 3 - 6 can be repeated to read any number of symbols from the file.</p>
<p >The following sections illustrate the basic steps for each type of interface. The method of writing (string, raw or mapped) can be selected for each symbol; it cannot be changed while writing a symbol.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Reading data using strings</h2>
<p >Reading data using strings does not require any unique element registration.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!gdx.gdxFindSymbol(<span class="stringliteral">&quot;x&quot;</span>,SyNr)) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** Could not find symbol X&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">gdx.gdxSymbolInfo(SyNr,SyName,SyDim,SyTyp);</div>
<div class="line"><span class="keywordflow">if</span>(SyDim != 1 || SyTyp != dt_par) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** X is not a one dimensional parameter&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadStrStart(SyNr,NrRecs))</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Parameter X has &quot;</span> &lt;&lt; NrRecs &lt;&lt; <span class="stringliteral">&quot; records&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(gdx.gdxDataReadStr(IndxS,Values,N))</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Record = &quot;</span> &lt;&lt; IndxS[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Values[0] &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadDone())</div>
<div class="line">   ReportGDXError();</div>
</div><!-- fragment --><p >In this example we find the symbol by its name, and before reading the data we verify that the symbol represents a one dimensional parameter.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Reading data using integers (raw)</h2>
<p >Reading data using integers in Raw mode does not require the registration of unique elements. The read routine returns an integer for which we can find the string representation.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!gdx.gdxFindSymbol(<span class="stringliteral">&quot;x&quot;</span>,SyNr) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** Could not find symbol X&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">gdx.gdxSymbolInfo(SyNr,SyName,SyDim,SyTyp);</div>
<div class="line"><span class="keywordflow">if</span>(SyDim != 1 || SyTyp != dt_par) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** X is not a one dimensional parameter&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadRawStart(SyNr,NrRecs))</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Parameter X has &quot;</span>,NrRecs,<span class="stringliteral">&quot; records&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(gdx.gdxDataReadRaw(IndxI,Values,N)) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Record = &quot;</span> &lt;&lt; IndxI[0] &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; Values[0];</div>
<div class="line">   gdx.gdxUMUelGet(IndxI[0],S,UsrMap);</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot; with string = &quot;</span> &lt;&lt; S &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadDone())</div>
<div class="line">   ReportGDXError();</div>
</div><!-- fragment --><p >In this example we find the symbol by its name, and before reading the data we verify that the symbol represents a one dimensional parameter. When reading the data, we get a unique element as an integer. The integer value is used to get the corresponding string for the unique element.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Reading data using integers (Mapped)</h2>
<p >Reading data using integers in Mapped mode requires the registration of unique elements. The read routine returns an integer for which we can find the string representation.</p>
<p >When the gdx file contains data elements that we never registered, the read function will not return these elements, they will be added to an internal list of error records instead.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!gdx.gdxUELRegisterMapStart())</div>
<div class="line">   ReportGDXError();</div>
<div class="line">gdx.gdxUELRegisterMap(1000,<span class="stringliteral">&quot;New-York&quot;</span>);</div>
<div class="line">gdx.gdxUELRegisterMap(2000,<span class="stringliteral">&quot;Chicago&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxUELRegisterDone())</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxFindSymbol(<span class="stringliteral">&quot;x&quot;</span>,SyNr)) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** Could not find symbol X&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">gdx.gdxSymbolInfo(SyNr,SyName,SyDim,SyTyp);</div>
<div class="line"><span class="keywordflow">if</span>(SyDim != 1 || SyTyp != dt_par) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** X is not a one dimensional parameter&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadMapStart(SyNr,NrRecs))</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Parameter X has &quot;</span> &lt;&lt; NrRecs &lt;&lt; <span class="stringliteral">&quot; records&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> N{}; N&lt;NrRecs; N++) {</div>
<div class="line">   <span class="keywordflow">if</span>(gdx.gdxDataReadMap(N,IndxI,Values,N)) {</div>
<div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Record = &quot;</span> &lt;&lt; N &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; IndxI[0] &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; Values[0];</div>
<div class="line">      GetUEL(gdx,IndxI[0],S);</div>
<div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot; with string = &quot;</span> &lt;&lt; S &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadDone())</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line">NrRecs = gdx.gdxDataErrorCount();</div>
<div class="line"><span class="keywordflow">if</span>(NrRecs &gt; 0)</div>
<div class="line">   std::cout &lt;&lt; NrRecs &lt;&lt; <span class="stringliteral">&quot; records were skipped&quot;</span> &lt;&lt; std::endl;</div>
</div><!-- fragment --><p >In this example we register a few unique elements using our \own integer values. After verifying that we can find the symbol and that the symbol represents a one dimensional parameter we can read the data. The index for the parameter is returned using the integers we used when registering our elements. When we read the records in sequence, the index returned will be sorted with the first index position the most significant.</p>
<p >After reading the data, we print the number of records that were skipped in the read routine.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Reading data using a filter</h2>
<p >Reading data using a filter allows us to control the action for every index position. The type of action is specified using action codes and needs to be specified for every index position. The actual reading of the records is done with the gdxDataReadMap function.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Action code   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UnMapped (-2)   </td><td class="markdownTableBodyNone">No mapping is performed; the value of the unique element is the value as stored in the GDX file. Use gdxUMUelGet to get the string representation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Checked (0)   </td><td class="markdownTableBodyNone">Map the unique element value to the user defined value. Use gdxGetUEL to get the string representation. If a user mapping was not defined for this element,<br  />
the record is flagged as an error record and the record will be skipped.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Expand (-1)   </td><td class="markdownTableBodyNone">Map the unique element value to the user defined value. Use gdxGetUEL to get the string representation. If a user mapping was not defined for this element, define a user mapping automatically using the next higher user map value.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Filter number (&gt;0)   </td><td class="markdownTableBodyNone">Map the unique element value to the user defined value. Use gdxGetUEL to get the string representation. If the element is not enabled in the filter for this index position, the record is flagged as an error record and it will be skipped. The filter number is specified using the gdxFilterRegisterStart function.   </td></tr>
</table>
<p >Referring to the following GAMS fragment, we want to read the parameter <code>A</code>. The set <code>I</code> is the domain for the first index; there is no domain for the second index position:</p>
<div class="fragment"><div class="line">Set I /.../;</div>
<div class="line">Parameter A(I,*);</div>
</div><!-- fragment --><p >Assuming we have read set <code>I</code> already, the following code snapshot illustrates how to read parameter <code>A</code>.</p>
<div class="fragment"><div class="line"><span class="comment">// Register the filter for set I; reference this filter with integer 123</span></div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxFilterRegisterStart(123))</div>
<div class="line">   ReportGDXError();</div>
<div class="line">gdx.gdxFilterRegister(1000);</div>
<div class="line">gdx.gdxFilterRegister(2000);</div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxFilterRegisterDone()</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// set the filter</span></div>
<div class="line">Filt[0] = 123; <span class="comment">//filter for I</span></div>
<div class="line">Filt[1] = -1; <span class="comment">// expand</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Remember highest mapped value in variable LastMapped</span></div>
<div class="line">gdx.gdxUMUelInfo(NrUnMapped,LastMapped);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read parameter A as a 2 dimensional parameter</span></div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxFindSymbol(<span class="stringliteral">&quot;A&quot;</span>,SyNr) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** Could not find symbol A&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">gdx.gdxSymbolInfo(SyNr,SyName,SyDim,SyTyp);</div>
<div class="line"><span class="keywordflow">if</span>(SyDim != 2 || SyTyp != dt_par) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;**** A is not a two dimensional parameter&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxReadFilteredStart(SyNr,Filt,NrRecs);</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> N{1}; N&lt;=NrRecs; N++) {</div>
<div class="line">   <span class="keywordflow">if</span>(gdx.gdxDataReadMap(N,IndxI,Values)) {</div>
<div class="line">      <span class="comment">// do something to process the record read (index, values)</span></div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(!gdx.gdxDataReadDone()</div>
<div class="line">   ReportGDXError();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// see if there are new unique elements</span></div>
<div class="line">gdx.gdxUMUelInfo(NrUnMapped,NewLastMapped);</div>
<div class="line"><span class="keywordflow">if</span>(NewLastMapped &gt; LastMapped) {</div>
<div class="line">   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> N{LastMapped + 1}; N&lt;=NewLastMapped; N++) {</div>
<div class="line">      gdx.gdxGetUel(N,S);</div>
<div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;New element &quot;</span> &lt;&lt; N &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; S &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md18"></a>
Dealing with acronyms</h2>
<p >In GAMS we can use acronyms in places where we can use a floating point number as in the following example:</p>
<div class="fragment"><div class="line">set i /i1*i5/;</div>
<div class="line">acronym acro1, acro2;</div>
<div class="line">parameter A(i) /i1=1, i2=acro1, i3=3, i4=acro2, i5=5/;</div>
<div class="line">display A;</div>
</div><!-- fragment --><p >The result of the display statement looks like:</p>
<div class="fragment"><div class="line">----      4 PARAMETER A</div>
<div class="line"> </div>
<div class="line">i1 1.000,    i2 acro1,    i3 3.000,    i4 acro2,    i5 5.000</div>
</div><!-- fragment --><p >As we write data to a GDX file, the system keeps track which acronyms were used in the data written. Before we close the GDX file, we share the identifiers used for each acronym used. When reading a GDX file, we share all acronym identifiers and their corresponding index before reading any data. Doing so will replace the acronym indices stored in the GDX file by the one we provide.</p>
<p >The example below illustrates these steps.</p>
<div class="fragment"><div class="line">TGXFileObj gdx;</div>
<div class="line">TgdxUELIndex UELS;</div>
<div class="line">TgdxValues Vals;</div>
<div class="line"><span class="keywordtype">int</span> FDim, N, NrRecs, ErrNr, acrindx;</div>
<div class="line">std::array&lt;char, GMS_SSIZE&gt; ErrMsg, acrtext, acrname;</div>
<div class="line"><span class="comment">//Check the library</span></div>
<div class="line"><span class="keywordflow">if</span>(!gdxGetReadyX(ErrMsg)) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Error loading GDX library, msg = &quot;</span> &lt;&lt; ErrMsg &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"><span class="comment">//Create GDX object and open file for writing</span></div>
<div class="line">gdx.gdxCreateX( ErrMsg);</div>
<div class="line">gdx.gdxOpenWriteEx( <span class="stringliteral">&quot;test.gdx&quot;</span>, <span class="stringliteral">&quot;testing&quot;</span>, 0, ErrNr);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//register some unique elements</span></div>
<div class="line">gdx.gdxUELRegisterRawStart();</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> N{}; N&lt;5; N++)</div>
<div class="line">   gdx.gdxUELRegisterRaw( <span class="stringliteral">&quot;uel&quot;</span> + std::to_string(N));</div>
<div class="line">gdx.gdxUELRegisterDone();</div>
<div class="line"> </div>
<div class="line"><span class="comment">//write a parameter with two acronyms</span></div>
<div class="line">gdx.gdxDataWriteRawStart( <span class="stringliteral">&quot;symb1&quot;</span>, <span class="stringliteral">&quot;text for symb1&quot;</span>, 1, dt_par, 0);</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> N{}; N&lt;5; N++) {</div>
<div class="line">   UELS[0] = N;</div>
<div class="line">   Vals[vallevel] = (N == 1 || N == 3) ? gdx.gdxAcronymValue( N) : N;</div>
<div class="line">   gdx.gdxDataWriteRaw( UELS, Vals);</div>
<div class="line">}</div>
<div class="line">gdx.gdxDataWriteDone();</div>
<div class="line"> </div>
<div class="line"><span class="comment">//provide the names for the acronyms used</span></div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> N{}; N&lt;gdx.gdxAcronymCount(); N++) {</div>
<div class="line">   gdx.gdxAcronymGetInfo( N, acrname, acrtext, acrindx);</div>
<div class="line">   <span class="keywordflow">if</span>(acrindx == 2)</div>
<div class="line">      gdx.gdxAcronymSetInfo( N, <span class="stringliteral">&quot;acro1&quot;</span>, <span class="stringliteral">&quot;Some text for acro1&quot;</span>, acrindx)</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(acrindx == 4)</div>
<div class="line">      gdx.gdxAcronymSetInfo( N, <span class="stringliteral">&quot;acro2&quot;</span>, <span class="stringliteral">&quot;Some text for acro2&quot;</span>, acrindx)</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//final check for errors before we close the file</span></div>
<div class="line">N = gdx.gdxClose();</div>
<div class="line"><span class="keywordflow">if</span>(N) {</div>
<div class="line">   gdxErrorStr(Nil, N, ErrMsg);</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Error writing file = &quot;</span> &lt;&lt; ErrMsg &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line">gdx.gdxFree();</div>
<div class="line"> </div>
<div class="line"><span class="comment">//open the file we just created</span></div>
<div class="line">gdx.gdxCreateX( ErrMsg);</div>
<div class="line">gdx.gdxOpenRead( <span class="stringliteral">&quot;test.gdx&quot;</span>, ErrNr);</div>
<div class="line"><span class="keywordflow">if</span>(ErrNr) {</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Error opening file, nr = &quot;</span> &lt;&lt; ErrNr &lt;&lt; std::endl;</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//give acronym indices using the name of the acronym</span></div>
<div class="line">gdx.gdxAcronymSetInfo( 1, <span class="stringliteral">&quot;acro1&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1000);</div>
<div class="line">gdx.gdxAcronymSetInfo( 2, <span class="stringliteral">&quot;acro2&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1001);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//read the parameter</span></div>
<div class="line">gdx.gdxDataReadRawStart( 1, NrRecs);</div>
<div class="line"><span class="keywordflow">while</span>(gdx.gdxDataReadRaw( UELs, Vals, FDim)) {</div>
<div class="line">   N = gdx.gdxAcronymIndex( Vals[vallevel]);</div>
<div class="line">   <span class="keywordflow">if</span>(!N) std::cout &lt;&lt; Vals[vallevel])</div>
<div class="line">   <span class="keywordflow">else</span> std::cout &lt;&lt; <span class="stringliteral">&quot;Acronym: index = &quot;</span> &lt;&lt; N &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="line">gdx.gdxDataReadDone();</div>
<div class="line"> </div>
<div class="line">ErrNr = gdx.gdxClose();</div>
<div class="line"><span class="comment">//final error check before closing the file</span></div>
<div class="line"><span class="keywordflow">if</span>(ErrNr) {</div>
<div class="line">   gdxErrorStr(nil, ErrNr, ErrMsg);</div>
<div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Error reading file = &quot;</span>, ErrMsg);</div>
<div class="line">   exit(1);</div>
<div class="line">}</div>
<div class="line">gdx.gdxFree();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md19"></a>
Functions by Category</h1>
<p >The following table organizes the functions by category:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Functions    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">File (Open/Close)   </td><td class="markdownTableBodyNone">gdxOpenRead gdxOpenWrite gdxClose    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System/Symbol   </td><td class="markdownTableBodyNone">gdxSystemInfo gdxSymbolInfo gdxSymbolInfoX    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Information   </td><td class="markdownTableBodyNone">gdxFindSymbol gdxGetUEL    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unique elements   </td><td class="markdownTableBodyNone">gdxUELRegisterRawStart gdxUELRegisterMapStart gdxUELRegisterStrStart gdxUELRegisterRaw gdxUELRegisterMap gdxUELRegisterStr gdxUELRegisterDone gdxGetUEL gdxUMUelInfo gdxUMUelGet gdxUMFindUEL    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Write Data   </td><td class="markdownTableBodyNone">gdxDataWriteRawStart gdxDataWriteMapStart gdxDataWriteStrStart gdxDataWriteRaw gdxDataWriteMap gdxDataWriteStr gdxDataWriteDone    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Read Data   </td><td class="markdownTableBodyNone">gdxDataReadRawStart gdxDataReadMapStart gdxDataReadStrStart gdxDataReadRaw gdxDataReadMap gdxDataReadStr gdxDataReadFilteredStart gdxDataReadDone gdxDataErrorCount gdxDataErrorRecord    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Text for UELs   </td><td class="markdownTableBodyNone">gdxAddSetText gdxSetTextNodeNr gdxGetElemText gdxSetHasText    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Filters   </td><td class="markdownTableBodyNone">gdxFilterRegisterStart gdxFilterRegister gdxFilterRegisterDone gdxFilterExists    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Special values   </td><td class="markdownTableBodyNone">gdxResetSpecialValues gdxSetSpecialValues gdxGetSpecialValues gdxMapValue    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Errors   </td><td class="markdownTableBodyNone">gdxGetLastError gdxErrorCount gdxErrorStr    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Version/Information   </td><td class="markdownTableBodyNone">gdxSetTraceLevel gdxFileVersion gdxGetDLLVersion    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Longest symbol UEL   </td><td class="markdownTableBodyNone">gdxSymbMaxLength gdxUELMaxLength gdxSymbIndxMaxLength    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acronyms   </td><td class="markdownTableBodyNone">gdxAcronymIndex gdxAcronymValue gdxAcronymCount gdxAcronymGetInfo gdxAcronymSetInfo   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md20"></a>
Example programs</h1>
<h2><a class="anchor" id="autotoc_md21"></a>
Example 1 (GAMS)</h2>
<p >In this modified version of the trnsport.gms model, we use an external program to generate data for the demand parameter. After we solve the model, we write the solution to a GDX file, and call the external program again to read the variable from the GDX file.</p>
<div class="fragment"><div class="line">$Title trnsport model using gdx files</div>
<div class="line">$EOLCOM //</div>
<div class="line">  Sets</div>
<div class="line">       i   canning plants   / seattle, san-diego /</div>
<div class="line">       j   markets          / new-york, chicago, topeka / ;</div>
<div class="line"> </div>
<div class="line">  Parameter</div>
<div class="line">       a(i)  capacity of plant i in cases</div>
<div class="line">         /    seattle     350</div>
<div class="line">              san-diego   600  /</div>
<div class="line"> </div>
<div class="line">       b(j)  demand at market j in cases ;</div>
<div class="line"> </div>
<div class="line">  Table d(i,j)  distance in thousands of miles</div>
<div class="line">                    new-york       chicago      topeka</div>
<div class="line">      seattle          2.5           1.7          1.8</div>
<div class="line">      san-diego        2.5           1.8          1.4  ;</div>
<div class="line"> </div>
<div class="line">  Scalar f  freight in dollars per case per thousand miles  /90/ ;</div>
<div class="line"> </div>
<div class="line">  Parameter c(i,j)  transport cost in thousands of dollars per case ;</div>
<div class="line"> </div>
<div class="line">            c(i,j) = f * d(i,j) / 1000 ;</div>
<div class="line"> </div>
<div class="line">  Variables</div>
<div class="line">       x(i,j)  shipment quantities in cases</div>
<div class="line">       z       total transportation costs in thousands of dollars ;</div>
<div class="line"> </div>
<div class="line">  Positive Variable x ;</div>
<div class="line"> </div>
<div class="line">  Equations</div>
<div class="line">       cost        define objective function</div>
<div class="line">       supply(i)   observe supply limit at plant i</div>
<div class="line">       demand(j)   satisfy demand at market j ;</div>
<div class="line"> </div>
<div class="line">// These lines execute during the compilation phase</div>
<div class="line">// The GAMS system directory is passed the the program so it knows where</div>
<div class="line">// to look for the gdxcclib library</div>
<div class="line"> </div>
<div class="line">$call &#39;gdxexdp.exe %gams.sysdir%&#39;      // create demand data</div>
<div class="line">$GDXIN demanddata.gdx                  // open data file</div>
<div class="line">$LOAD  b=demand                        // load parameter b (named &#39;demand&#39; in file)</div>
<div class="line">$GDXIN                                 // close data file</div>
<div class="line"> </div>
<div class="line">  cost ..        z  =e=  sum((i,j), c(i,j)*x(i,j)) ;</div>
<div class="line"> </div>
<div class="line">  supply(i) ..   sum(j, x(i,j))  =l=  a(i) ;</div>
<div class="line"> </div>
<div class="line">  demand(j) ..   sum(i, x(i,j))  =g=  b(j) ;</div>
<div class="line"> </div>
<div class="line">  Model transport /all/ ;</div>
<div class="line"> </div>
<div class="line">  Solve transport using lp minimizing z ;</div>
<div class="line"> </div>
<div class="line">  Display b,x.l, x.m ;</div>
<div class="line"> </div>
<div class="line">// These lines execute during the execution phase</div>
<div class="line">execute_unload &#39;results.gdx&#39;,x;                     // write variable x to the gdx file</div>
<div class="line">execute &#39;gdxexdp.exe %gams.sysdir% results.gdx&#39;; // do something with the solution</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Example 2 (C)</h2>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  Use this command to compile the example:</span></div>
<div class="line"><span class="comment">  cl gdxdumpc.c ../../gmstest/apifiles/C/api/gdxcc.c ../../gmstest/apifiles/C/api/gclgms.c -I../../gmstest/apifiles/C/api/</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gdxcc.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gclgms.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">char</span> *val2str(gdxHandle_t Tptr, <span class="keywordtype">double</span> val, <span class="keywordtype">char</span> *s) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> sv;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (gdxAcronymName(Tptr, val, s)) {</div>
<div class="line">    <span class="keywordflow">return</span> s;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    gdxMapValue(Tptr, val, &amp;sv);</div>
<div class="line">    <span class="keywordflow">if</span> (sv_normal != sv)</div>
<div class="line">      sprintf(s,<span class="stringliteral">&quot;%s&quot;</span>, gmsSVText[sv]);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      sprintf(s,<span class="stringliteral">&quot;%g&quot;</span>, val);</div>
<div class="line">    <span class="keywordflow">return</span> s;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> rc,i,j,NrSy,NrUel,ADim,ACount,AUser,AUser2,NRec,FDim,IDum, BadUels=0;</div>
<div class="line">  <span class="keywordtype">int</span> ATyp, ATyp2;</div>
<div class="line">  <span class="keywordtype">char</span></div>
<div class="line">    msg[GMS_SSSIZE],</div>
<div class="line">    FileVersion[GMS_SSSIZE], FileProducer[GMS_SSSIZE],</div>
<div class="line">    sName[GMS_SSSIZE], sName2[GMS_SSSIZE], sText[GMS_SSSIZE], UelName[GMS_SSSIZE];</div>
<div class="line"> </div>
<div class="line">  gdxHandle_t Tptr=NULL;</div>
<div class="line">  <span class="keywordtype">char</span> DomainIDs[GMS_MAX_INDEX_DIM][GMS_SSSIZE];</div>
<div class="line">  <span class="keywordtype">char</span> *DP[GMS_MAX_INDEX_DIM];</div>
<div class="line">  <span class="keywordtype">double</span></div>
<div class="line">    Vals[GMS_VAL_MAX],</div>
<div class="line">    dv[GMS_VAL_MAX];</div>
<div class="line">  <span class="keywordtype">int</span></div>
<div class="line">    Keys[GMS_MAX_INDEX_DIM];</div>
<div class="line">   <span class="keywordtype">char</span> *dn, c;</div>
<div class="line"> </div>
<div class="line">  GDXSTRINDEXPTRS_INIT(DomainIDs,DP);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (argc != 2) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Usage: gdxdumpc gdxfile\n&quot;</span>);</div>
<div class="line">    exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  gdxCreate (&amp;Tptr,msg,<span class="keyword">sizeof</span>(msg));</div>
<div class="line">  <span class="keywordflow">if</span> (NULL==Tptr) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Could not create GDX object:\n%s\n&quot;</span>,msg);</div>
<div class="line">    exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rc = gdxOpenRead(Tptr, argv[1], &amp;i);</div>
<div class="line">  <span class="keywordflow">if</span> (0==rc) {</div>
<div class="line">    gdxErrorStr(Tptr,i,msg);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Could not read GDX file %s:\n%s (rc=%d)\n&quot;</span>,argv[1],msg,rc);</div>
<div class="line">    exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  rc = gdxGetLastError(Tptr);</div>
<div class="line">  <span class="keywordflow">if</span> (rc) {</div>
<div class="line">    gdxErrorStr(Tptr,rc,msg);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Problems processing GDX file %s:\n%s (rc=%d)\n&quot;</span>,argv[1],msg,rc);</div>
<div class="line">    exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  gdxFileVersion(Tptr, FileVersion, FileProducer);</div>
<div class="line">  gdxSystemInfo(Tptr,&amp;NrSy,&amp;NrUel);</div>
<div class="line">  printf(<span class="stringliteral">&quot;*  File version   : %s\n&quot;</span>,FileVersion);</div>
<div class="line">  printf(<span class="stringliteral">&quot;*  Producer       : %s\n&quot;</span>,FileProducer);</div>
<div class="line">  printf(<span class="stringliteral">&quot;*  Symbols        : %d\n&quot;</span>,NrSy);</div>
<div class="line">  printf(<span class="stringliteral">&quot;*  Unique Elements: %d\n&quot;</span>,NrUel);</div>
<div class="line"> </div>
<div class="line"> <span class="comment">/* Acroynms */</span></div>
<div class="line"> <span class="keywordflow">for</span> (i=1; i&lt;=gdxAcronymCount(Tptr); i++) {</div>
<div class="line">   gdxAcronymGetInfo(Tptr, i, sName, sText, &amp;rc);</div>
<div class="line">   printf(<span class="stringliteral">&quot;Acronym %s&quot;</span>, sName);</div>
<div class="line">   <span class="keywordflow">if</span> (strlen(sText)) printf(<span class="stringliteral">&quot; &#39;%s&#39;&quot;</span>, sText);</div>
<div class="line">   printf(<span class="stringliteral">&quot;;\n&quot;</span>);</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">/* Symbolinfo */</span></div>
<div class="line"> printf(<span class="stringliteral">&quot;$ontext\n&quot;</span>);</div>
<div class="line"> <span class="keywordflow">for</span> (i=1; i&lt;=NrSy; i++) {</div>
<div class="line">   gdxSymbolInfo(Tptr, i, sName, &amp;ADim, &amp;ATyp);</div>
<div class="line">   gdxSymbolInfoX(Tptr, i, &amp;ACount, &amp;rc, sText);</div>
<div class="line">   printf(<span class="stringliteral">&quot;%-15s %3d %-12s %s\n&quot;</span>, sName, ADim, gmsGdxTypeText[ATyp],sText);</div>
<div class="line"> }</div>
<div class="line"> printf(<span class="stringliteral">&quot;$offtext\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> printf(<span class="stringliteral">&quot;$onempty onembedded \n&quot;</span>);</div>
<div class="line"> <span class="keywordflow">for</span> (i=1; i&lt;=NrSy; i++) {</div>
<div class="line"> </div>
<div class="line">   gdxSymbolInfo(Tptr, i, sName, &amp;ADim, &amp;ATyp);</div>
<div class="line">   gdxSymbolInfoX(Tptr, i, &amp;ACount, &amp;AUser, sText);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (GMS_DT_VAR == ATyp || GMS_DT_EQU == ATyp) printf(<span class="stringliteral">&quot;$ontext\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (GMS_DT_VAR == ATyp) {</div>
<div class="line">     <span class="keywordflow">if</span> (AUser &lt; 0 || AUser&gt;=GMS_VARTYPE_MAX) AUser = GMS_VARTYPE_FREE;</div>
<div class="line">     memcpy(dv,gmsDefRecVar[AUser],GMS_VAL_MAX*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line">     dn = (<span class="keywordtype">char</span> *) gmsVarTypeText[AUser];</div>
<div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GMS_DT_EQU == ATyp) {</div>
<div class="line">     <span class="keywordflow">if</span> (AUser &lt; 0 || AUser&gt;=GMS_EQUTYPE_MAX) AUser = GMS_EQUTYPE_E;</div>
<div class="line">     memcpy(dv,gmsDefRecEqu[AUser],GMS_VAL_MAX*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line">   } <span class="keywordflow">else</span> dv[GMS_VAL_LEVEL] = 0.0;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (0 == ADim &amp;&amp; GMS_DT_PAR == ATyp) <span class="comment">/* Scalar */</span></div>
<div class="line">     printf(<span class="stringliteral">&quot;Scalar&quot;</span>);</div>
<div class="line">   <span class="keywordflow">else</span> {</div>
<div class="line">     <span class="keywordflow">if</span> (GMS_DT_VAR == ATyp) printf(<span class="stringliteral">&quot;%s &quot;</span>,dn);</div>
<div class="line">     printf(<span class="stringliteral">&quot;%s&quot;</span>,gmsGdxTypeText[ATyp]);</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> (GMS_DT_ALIAS == ATyp) {</div>
<div class="line">     gdxSymbolInfo(Tptr, AUser, sName2, &amp;j, &amp;ATyp2);</div>
<div class="line">     printf(<span class="stringliteral">&quot; (%s, %s);\n&quot;</span>, sName, sName2);</div>
<div class="line">   } <span class="keywordflow">else</span> {</div>
<div class="line">     printf(<span class="stringliteral">&quot; %s&quot;</span>, sName);</div>
<div class="line">     <span class="keywordflow">if</span> (ADim &gt; 0) {</div>
<div class="line">       gdxSymbolGetDomain(Tptr, i, Keys);</div>
<div class="line">       printf(<span class="stringliteral">&quot;(&quot;</span>); <span class="keywordflow">for</span> (j=0; j&lt;ADim; j++) {</div>
<div class="line">         <span class="keywordflow">if</span> (Keys[j]==0) strcpy(sName,<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line">         <span class="keywordflow">else</span></div>
<div class="line">           gdxSymbolInfo(Tptr, Keys[j], sName, &amp;AUser2, &amp;ATyp2);</div>
<div class="line">         <span class="keywordflow">if</span> (j &lt; ADim-1) printf(<span class="stringliteral">&quot;%s,&quot;</span>,sName);</div>
<div class="line">         <span class="keywordflow">else</span> printf(<span class="stringliteral">&quot;%s)&quot;</span>,sName);</div>
<div class="line">       }</div>
<div class="line">     }</div>
<div class="line">     <span class="keywordflow">if</span> (strlen(sText)) printf(<span class="stringliteral">&quot; &#39;%s&#39;&quot;</span>, sText);</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> (0 == ACount) {</div>
<div class="line">     <span class="keywordflow">if</span> (0 == ADim &amp;&amp; GMS_DT_PAR == ATyp) <span class="comment">/* Scalar */</span></div>
<div class="line">       printf(<span class="stringliteral">&quot; / 0.0 /;\n&quot;</span>);</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GMS_DT_ALIAS != ATyp)</div>
<div class="line">       printf(<span class="stringliteral">&quot; / /;\n&quot;</span>);</div>
<div class="line">   } <span class="keywordflow">else</span> {</div>
<div class="line">     printf(<span class="stringliteral">&quot; /\n&quot;</span>);</div>
<div class="line">     gdxDataReadRawStart (Tptr, i, &amp;NRec);</div>
<div class="line">     <span class="keywordflow">while</span> (gdxDataReadRaw(Tptr,Keys,Vals,&amp;FDim)) {</div>
<div class="line">       <span class="keywordflow">if</span> ((GMS_DT_VAR == ATyp || GMS_DT_EQU == ATyp) &amp;&amp; 0 == memcmp(Vals,dv,GMS_VAL_MAX*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>))) <span class="comment">/* all default records */</span></div>
<div class="line">         <span class="keywordflow">continue</span>;</div>
<div class="line">       <span class="keywordflow">if</span> (GMS_DT_PAR == ATyp &amp;&amp; 0.0 == Vals[GMS_VAL_LEVEL])</div>
<div class="line">         <span class="keywordflow">continue</span>;</div>
<div class="line">       <span class="keywordflow">for</span> (j=1; j&lt;=ADim; j++) {</div>
<div class="line">         <span class="keywordflow">if</span> (1==gdxUMUelGet(Tptr, Keys[j-1], UelName, &amp;IDum))</div>
<div class="line">           printf(<span class="stringliteral">&quot;&#39;%s&#39;&quot;</span>, UelName);</div>
<div class="line">         <span class="keywordflow">else</span> {</div>
<div class="line">           printf(<span class="stringliteral">&quot;L__&quot;</span>,Keys[j-1]); BadUels++;</div>
<div class="line">         }</div>
<div class="line">         <span class="keywordflow">if</span> (j &lt; ADim) printf (<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line">       }</div>
<div class="line">       <span class="keywordflow">if</span> (GMS_DT_PAR == ATyp)</div>
<div class="line">         printf(<span class="stringliteral">&quot; %s\n&quot;</span>, val2str(Tptr, Vals[GMS_VAL_LEVEL], msg));</div>
<div class="line">       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GMS_DT_SET == ATyp)</div>
<div class="line">         <span class="keywordflow">if</span> (Vals[GMS_VAL_LEVEL]) {</div>
<div class="line">           j = (int) Vals[GMS_VAL_LEVEL];</div>
<div class="line">           gdxGetElemText(Tptr, j, msg, &amp;IDum);</div>
<div class="line">           printf(<span class="stringliteral">&quot; &#39;%s&#39;\n&quot;</span>, msg);</div>
<div class="line">         } <span class="keywordflow">else</span>  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GMS_DT_VAR == ATyp || GMS_DT_EQU == ATyp) {</div>
<div class="line">         printf(<span class="stringliteral">&quot; .&quot;</span>); c=<span class="charliteral">&#39;(&#39;</span>;</div>
<div class="line">         <span class="keywordflow">for</span> (j=GMS_VAL_LEVEL; j&lt;GMS_VAL_MAX; j++) {</div>
<div class="line">           <span class="keywordflow">if</span> (Vals[j] != dv[j]) {</div>
<div class="line">             <span class="keywordflow">if</span> (GMS_VAL_SCALE == j &amp;&amp; GMS_DT_VAR == ATyp &amp;&amp;</div>
<div class="line">                 AUser != GMS_VARTYPE_POSITIVE &amp;&amp; AUser != GMS_VARTYPE_NEGATIVE &amp;&amp; AUser != GMS_VARTYPE_FREE)</div>
<div class="line">               printf(<span class="stringliteral">&quot;%c prior %s&quot;</span>, c, val2str(Tptr, Vals[GMS_VAL_SCALE], msg));</div>
<div class="line">             <span class="keywordflow">else</span></div>
<div class="line">               printf(<span class="stringliteral">&quot;%c %s %s&quot;</span>, c, gmsValTypeText[j]+1, val2str(Tptr, Vals[j], msg));</div>
<div class="line">             <span class="keywordflow">if</span> ( <span class="charliteral">&#39;(&#39;</span> == c) c = <span class="charliteral">&#39;,&#39;</span>;</div>
<div class="line">           }</div>
<div class="line">         }</div>
<div class="line">         printf(<span class="stringliteral">&quot; )\n&quot;</span>);</div>
<div class="line">       }</div>
<div class="line">     }</div>
<div class="line">   }</div>
<div class="line">   printf(<span class="stringliteral">&quot;/;\n&quot;</span>);</div>
<div class="line">   j=1; <span class="keywordflow">while</span> (gdxSymbolGetComment(Tptr, i, j++, msg)) printf(<span class="stringliteral">&quot;* %s\n&quot;</span>, msg);</div>
<div class="line">   <span class="keywordflow">if</span> (GMS_DT_VAR == ATyp || GMS_DT_EQU == ATyp) printf(<span class="stringliteral">&quot;$offtext\n&quot;</span>);</div>
<div class="line">   printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> }</div>
<div class="line"> printf(<span class="stringliteral">&quot;$offempty offembedded \n&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (BadUels &gt; 0)</div>
<div class="line">   printf(<span class="stringliteral">&quot;**** %d reference(s) to unique elements without a string representation\n&quot;</span>, BadUels);</div>
<div class="line"> </div>
<div class="line"> gdxFree(&amp;Tptr);</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md23"></a>
Example 3 (C++)</h2>
<div class="fragment"><div class="line"> <span class="comment">/*</span></div>
<div class="line"><span class="comment">   Use this command to compile the example:</span></div>
<div class="line"><span class="comment">   cl xp_example1.cpp ../C/api/gdxcc.c -I../C/api</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gdxcc.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> gdxStrIndexPtrs_t Indx;</div>
<div class="line"><span class="keyword">static</span> gdxStrIndex_t     IndxXXX;</div>
<div class="line"><span class="keyword">static</span> gdxValues_t       Values;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ReportGDXError(gdxHandle_t PGX) {</div>
<div class="line">    <span class="keywordtype">char</span> S[GMS_SSSIZE];</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;**** Fatal GDX Error&quot;</span> &lt;&lt; endl;</div>
<div class="line">    gdxErrorStr(PGX, gdxGetLastError(PGX), S);</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;**** &quot;</span> &lt;&lt; S &lt;&lt; endl;</div>
<div class="line">    exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ReportIOError(<span class="keywordtype">int</span> N, <span class="keyword">const</span> std::string &amp;msg) {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;**** Fatal I/O Error = &quot;</span> &lt;&lt; N &lt;&lt; <span class="stringliteral">&quot; when calling &quot;</span> &lt;&lt; msg &lt;&lt; endl;</div>
<div class="line">    exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> WriteData(gdxHandle_t PGX, <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keyword">const</span> <span class="keywordtype">double</span> V) {</div>
<div class="line">    strcpy(Indx[0], s);</div>
<div class="line">    Values[GMS_VAL_LEVEL] = V;</div>
<div class="line">    gdxDataWriteStr(PGX, (<span class="keyword">const</span> <span class="keywordtype">char</span> **)Indx, Values);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">    gdxHandle_t PGX = NULL;</div>
<div class="line">    <span class="keywordtype">char</span>        Msg[GMS_SSSIZE], Producer[GMS_SSSIZE], Sysdir[GMS_SSSIZE], VarName[GMS_SSSIZE];</div>
<div class="line">    <span class="keywordtype">int</span>         ErrNr;</div>
<div class="line">    <span class="keywordtype">int</span>         VarNr;</div>
<div class="line">    <span class="keywordtype">int</span>         NrRecs;</div>
<div class="line">    <span class="keywordtype">int</span>         N;</div>
<div class="line">    <span class="keywordtype">int</span>         Dim;</div>
<div class="line">    <span class="keywordtype">int</span>         VarTyp;</div>
<div class="line">    <span class="keywordtype">int</span>         D;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 2 || argc &gt; 3) {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;**** xp_Example1: incorrect number of parameters&quot;</span> &lt;&lt; endl;</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    strcpy(Sysdir, argv[1]);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;xp_Example1 using GAMS system directory: &quot;</span> &lt;&lt; Sysdir &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!gdxCreateD(&amp;PGX, Sysdir, Msg, <span class="keyword">sizeof</span>(Msg))) {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;**** Could not load GDX library&quot;</span> &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;**** &quot;</span> &lt;&lt; Msg &lt;&lt; endl;</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    gdxGetDLLVersion(PGX, Msg);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Using GDX DLL version: &quot;</span> &lt;&lt; Msg &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    GDXSTRINDEXPTRS_INIT(IndxXXX, Indx);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (2 == argc) {</div>
<div class="line">        <span class="comment">/* Write demand data */</span></div>
<div class="line">        gdxOpenWrite(PGX, <span class="stringliteral">&quot;demanddata.gdx&quot;</span>, <span class="stringliteral">&quot;xp_example1&quot;</span>, &amp;ErrNr);</div>
<div class="line">        <span class="keywordflow">if</span> (ErrNr) ReportIOError(ErrNr, <span class="stringliteral">&quot;gdxOpenWrite&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!gdxDataWriteStrStart(PGX, <span class="stringliteral">&quot;Demand&quot;</span>, <span class="stringliteral">&quot;Demand data&quot;</span>, 1, GMS_DT_PAR, 0))</div>
<div class="line">            ReportGDXError(PGX);</div>
<div class="line">        WriteData(PGX, <span class="stringliteral">&quot;New-York&quot;</span>, 324.0);</div>
<div class="line">        WriteData(PGX, <span class="stringliteral">&quot;Chicago&quot;</span>, 299.0);</div>
<div class="line">        WriteData(PGX, <span class="stringliteral">&quot;Topeka&quot;</span>, 274.0);</div>
<div class="line">        <span class="keywordflow">if</span> (!gdxDataWriteDone(PGX)) ReportGDXError(PGX);</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Demand data written by example1&quot;</span> &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        gdxOpenRead(PGX, argv[2], &amp;ErrNr);</div>
<div class="line">        <span class="keywordflow">if</span> (ErrNr) ReportIOError(ErrNr, <span class="stringliteral">&quot;gdxOpenRead&quot;</span>);</div>
<div class="line">        gdxFileVersion(PGX, Msg, Producer);</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;GDX file written using version: &quot;</span> &lt;&lt; Msg &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;GDX file written by: &quot;</span> &lt;&lt; Producer &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!gdxFindSymbol(PGX, <span class="stringliteral">&quot;x&quot;</span>, &amp;VarNr)) {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;**** Could not find variable X&quot;</span> &lt;&lt; endl;</div>
<div class="line">            exit(1);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        gdxSymbolInfo(PGX, VarNr, VarName, &amp;Dim, &amp;VarTyp);</div>
<div class="line">        <span class="keywordflow">if</span> (Dim != 2 || GMS_DT_VAR != VarTyp) {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;**** X is not a two dimensional variable: &quot;</span></div>
<div class="line">                &lt;&lt; Dim &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; VarTyp &lt;&lt; endl;</div>
<div class="line">            exit(1);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!gdxDataReadStrStart(PGX, VarNr, &amp;NrRecs)) ReportGDXError(PGX);</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Variable X has &quot;</span> &lt;&lt; NrRecs &lt;&lt; <span class="stringliteral">&quot; records&quot;</span> &lt;&lt; endl;</div>
<div class="line">        <span class="keywordflow">while</span> (gdxDataReadStr(PGX, Indx, Values, &amp;N)) {</div>
<div class="line">            <span class="keywordflow">if</span> (0 == Values[GMS_VAL_LEVEL]) <span class="keywordflow">continue</span>; <span class="comment">/* skip level 0.0 is default */</span></div>
<div class="line">            <span class="keywordflow">for</span> (D = 0; D &lt; Dim; D++) cout &lt;&lt; (D ? <span class="charliteral">&#39;.&#39;</span> : <span class="charliteral">&#39; &#39;</span>) &lt;&lt; Indx[D];</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; Values[GMS_VAL_LEVEL] &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;All solution values shown&quot;</span> &lt;&lt; endl;</div>
<div class="line">        gdxDataReadDone(PGX);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (ErrNr = gdxClose(PGX)) ReportIOError(ErrNr, <span class="stringliteral">&quot;gdxClose&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md24"></a>
Example 4 (VB.NET)</h2>
<div class="fragment"><div class="line">Module xp_example1</div>
<div class="line">    &#39;///////////////////////////////////////////////////////////////</div>
<div class="line">    &#39;// This program generates demand data for a modified version //</div>
<div class="line">    &#39;// of the trnsport model or reads the solution back from a   //</div>
<div class="line">    &#39;// gdx file.                                                 //</div>
<div class="line">    &#39;//                                                           //</div>
<div class="line">    &#39;// Calling convention:                                       //</div>
<div class="line">    &#39;// Case 1:                                                   //</div>
<div class="line">    &#39;//    Parameter 1: GAMS system directory                     //</div>
<div class="line">    &#39;// The program creates a GDX file with demand data           //</div>
<div class="line">    &#39;// Case 2:                                                   //</div>
<div class="line">    &#39;//    Parameter 1: GAMS system directory                     //</div>
<div class="line">    &#39;//    Parameter 2: gdxfile                                   //</div>
<div class="line">    &#39;// The program reads the solution from the GDX file          //</div>
<div class="line">    &#39;// Paul van der Eijk Jun-12, 2002                            //</div>
<div class="line">    &#39;///////////////////////////////////////////////////////////////</div>
<div class="line"> </div>
<div class="line">    Dim PGX As IntPtr</div>
<div class="line"> </div>
<div class="line">    Sub ReportGDXError(ByVal PGX As IntPtr)</div>
<div class="line">        Dim S As String = String.Empty</div>
<div class="line">        Console.WriteLine(&quot;**** Fatal GDX Error&quot;)</div>
<div class="line">        gdxErrorStr(0, gdxGetLastError(PGX), S)</div>
<div class="line">        Console.WriteLine(&quot;**** &quot; &amp; S)</div>
<div class="line">        End</div>
<div class="line">    End Sub</div>
<div class="line"> </div>
<div class="line">    Sub ReportIOError(ByVal N As Integer)</div>
<div class="line">        Console.WriteLine(&quot;**** Fatal I/O Error = &quot; &amp; N)</div>
<div class="line">        End</div>
<div class="line">    End Sub</div>
<div class="line"> </div>
<div class="line">    Sub WriteData(ByVal s As String, ByVal V As Double)</div>
<div class="line">        Dim Indx(maxdim) As String &#39;TgdxStrIndex</div>
<div class="line">        Dim Values(val_max) As Double &#39;TgdxValues</div>
<div class="line">        Indx(0) = s</div>
<div class="line">        Values(val_level) = V</div>
<div class="line">        gdxDataWriteStr(PGX, Indx, Values)</div>
<div class="line">    End Sub</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    Dim Msg As String</div>
<div class="line">    Dim Sysdir As String</div>
<div class="line">    Dim Producer As String</div>
<div class="line">    Dim ErrNr, rc As Integer</div>
<div class="line">    Dim Indx(maxdim) As String &#39;TgdxStrIndex</div>
<div class="line">    Dim Values(val_max) As Double &#39;TgdxValues</div>
<div class="line">    Dim VarNr As Integer</div>
<div class="line">    Dim NrRecs As Integer</div>
<div class="line">    Dim N As Integer</div>
<div class="line">    Dim Dimen As Integer</div>
<div class="line">    Dim VarName As String</div>
<div class="line">    Dim VarTyp As Integer</div>
<div class="line"> </div>
<div class="line">    Sub Main()</div>
<div class="line">        If Environment.GetCommandLineArgs().Length &lt;&gt; 2 And Environment.GetCommandLineArgs().Length &lt;&gt; 3 Then</div>
<div class="line">            Console.WriteLine(&quot;**** XP_Example1: incorrect number of parameters&quot;)</div>
<div class="line">            End</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        Sysdir = Environment.GetCommandLineArgs(1)</div>
<div class="line">        Console.WriteLine(&quot;XP_Example1 using GAMS system directory: &quot; &amp; Sysdir)</div>
<div class="line"> </div>
<div class="line">        If Not gdxCreateD(PGX, Sysdir, Msg) Then</div>
<div class="line">            Console.WriteLine(&quot;**** Could not load GDX library&quot;)</div>
<div class="line">            Console.WriteLine(&quot;**** &quot; &amp; Msg)</div>
<div class="line">            Exit Sub</div>
<div class="line">        End If</div>
<div class="line"> </div>
<div class="line">        gdxGetDLLVersion(PGX, Msg)</div>
<div class="line">        Console.WriteLine(&quot;Using GDX DLL version: &quot; &amp; Msg)</div>
<div class="line"> </div>
<div class="line">        If Environment.GetCommandLineArgs().Length = 2 Then</div>
<div class="line">            &#39;write demand data</div>
<div class="line">            gdxOpenWrite(PGX, &quot;demanddata.gdx&quot;, &quot;xp_example1&quot;, ErrNr)</div>
<div class="line">            If ErrNr &lt;&gt; 0 Then</div>
<div class="line">                ReportIOError(ErrNr)</div>
<div class="line">            End If</div>
<div class="line">            If gdxDataWriteStrStart(PGX, &quot;Demand&quot;, &quot;Demand data&quot;, 1, dt_par, 0) = 0 Then</div>
<div class="line">                ReportGDXError(PGX)</div>
<div class="line">            End If</div>
<div class="line">            WriteData(&quot;New-York&quot;, 324.0)</div>
<div class="line">            WriteData(&quot;Chicago&quot;, 299.0)</div>
<div class="line">            WriteData(&quot;Topeka&quot;, 274.0)</div>
<div class="line">            If gdxDataWriteDone(PGX) = 0 Then</div>
<div class="line">                ReportGDXError(PGX)</div>
<div class="line">            End If</div>
<div class="line">            Console.WriteLine(&quot;Demand data written by xp_example1&quot;)</div>
<div class="line">        Else</div>
<div class="line">            rc = gdxOpenRead(PGX, Environment.GetCommandLineArgs(2), ErrNr) &#39;Environment.GetCommandLineArgs(1) &quot;trnsport.gdx&quot;</div>
<div class="line">            If ErrNr &lt;&gt; 0 Then</div>
<div class="line">                ReportIOError(ErrNr)</div>
<div class="line">            End If</div>
<div class="line"> </div>
<div class="line">            &#39;read x variable back (non-default level values only)</div>
<div class="line">            gdxFileVersion(PGX, Msg, Producer)</div>
<div class="line">            Console.WriteLine(&quot;GDX file written using version: &quot; &amp; Msg)</div>
<div class="line">            Console.WriteLine(&quot;GDX file written by: &quot; &amp; Producer)</div>
<div class="line"> </div>
<div class="line">            If gdxFindSymbol(PGX, &quot;x&quot;, VarNr) = 0 Then</div>
<div class="line">                Console.WriteLine(&quot;**** Could not find variable X&quot;)</div>
<div class="line">                Exit Sub</div>
<div class="line">            End If</div>
<div class="line"> </div>
<div class="line">            gdxSymbolInfo(PGX, VarNr, VarName, Dimen, VarTyp)</div>
<div class="line">            If (Dimen &lt;&gt; 2) Or (VarTyp &lt;&gt; dt_var) Then</div>
<div class="line">                Console.WriteLine(&quot;**** X is not a two dimensional variable&quot;)</div>
<div class="line">                Exit Sub</div>
<div class="line">            End If</div>
<div class="line"> </div>
<div class="line">            If gdxDataReadStrStart(PGX, VarNr, NrRecs) = 0 Then</div>
<div class="line">                ReportGDXError(PGX)</div>
<div class="line">            End If</div>
<div class="line"> </div>
<div class="line">            Console.WriteLine(&quot;Variable X has &quot; &amp; NrRecs &amp; &quot; records&quot;)</div>
<div class="line">            While gdxDataReadStr(PGX, Indx, Values, N) &lt;&gt; 0</div>
<div class="line">                If Values(val_level) = 0.0 Then      &#39;skip level = 0.0 is default</div>
<div class="line">                    Continue While</div>
<div class="line">                End If</div>
<div class="line">                For D = 1 To Dimen</div>
<div class="line">                    Console.Write(Indx(D - 1))</div>
<div class="line">                    If D &lt; Dimen Then</div>
<div class="line">                        Console.Write(&quot;.&quot;)</div>
<div class="line">                    End If</div>
<div class="line">                Next</div>
<div class="line">                Console.WriteLine(&quot; = &quot; &amp; Values(val_level))</div>
<div class="line">            End While</div>
<div class="line">            Console.WriteLine(&quot;All solution values shown&quot;)</div>
<div class="line">            gdxDataReadDone(PGX)</div>
<div class="line">        End If</div>
<div class="line">        ErrNr = gdxClose(PGX)</div>
<div class="line">        If ErrNr &lt;&gt; 0 Then</div>
<div class="line">            ReportIOError(ErrNr)</div>
<div class="line">        End If</div>
<div class="line">    End Sub</div>
<div class="line">End Module</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25"></a>
Example 6 (Python)</h2>
<div class="fragment"><div class="line"><span class="keyword">import</span> argparse</div>
<div class="line"><span class="keyword">import</span> sys</div>
<div class="line"><span class="keyword">from</span> gams.core <span class="keyword">import</span> gdx</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    parser = argparse.ArgumentParser()</div>
<div class="line">    parser.add_argument(<span class="stringliteral">&quot;sysDir&quot;</span>)</div>
<div class="line">    parser.add_argument(<span class="stringliteral">&quot;gdxFile&quot;</span>, nargs=<span class="stringliteral">&quot;?&quot;</span>, default=<span class="keywordtype">None</span>)</div>
<div class="line">    args = parser.parse_args()</div>
<div class="line"> </div>
<div class="line">    print(f<span class="stringliteral">&quot;Using GAMS system directory: {args.sysDir}&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    gdx_h = gdx.new_gdxHandle_tp()</div>
<div class="line">    rc = gdx.gdxCreateD(gdx_h, args.sysDir, gdx.GMS_SSSIZE)</div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> rc[0]:</div>
<div class="line">        <span class="keywordflow">raise</span> Exception(rc[1])</div>
<div class="line"> </div>
<div class="line">    print(f<span class="stringliteral">&quot;Using GDX DLL version: {gdx.gdxGetDLLVersion(gdx_h)[1]}&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> args.gdxFile <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> gdx.gdxOpenWrite(gdx_h, <span class="stringliteral">&quot;demanddata.gdx&quot;</span>, <span class="stringliteral">&quot;xp_example1&quot;</span>)[0]:</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Error gdxOpenWrite&quot;</span>)</div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> gdx.gdxDataWriteStrStart(</div>
<div class="line">                gdx_h, <span class="stringliteral">&quot;Demand&quot;</span>, <span class="stringliteral">&quot;Demand data&quot;</span>, 1, gdx.GMS_DT_PAR, 0</div>
<div class="line">        ):</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Error gdxDataWriteStrStart&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        values = gdx.doubleArray(gdx.GMS_VAL_MAX)</div>
<div class="line">        values[gdx.GMS_VAL_LEVEL] = 324.0</div>
<div class="line">        gdx.gdxDataWriteStr(gdx_h, [<span class="stringliteral">&quot;New-York&quot;</span>], values)</div>
<div class="line">        values[gdx.GMS_VAL_LEVEL] = 299.0</div>
<div class="line">        gdx.gdxDataWriteStr(gdx_h, [<span class="stringliteral">&quot;Chicago&quot;</span>], values)</div>
<div class="line">        values[gdx.GMS_VAL_LEVEL] = 274.0</div>
<div class="line">        gdx.gdxDataWriteStr(gdx_h, [<span class="stringliteral">&quot;Topeka&quot;</span>], values)</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> gdx.gdxDataWriteDone(gdx_h):</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Error gdxDataWriteDone&quot;</span>)</div>
<div class="line">        print(<span class="stringliteral">&quot;Demand data written&quot;</span>)</div>
<div class="line">    <span class="keywordflow">else</span>:</div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> gdx.gdxOpenRead(gdx_h, sys.argv[2])[0]:</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Error gdxOpenRead&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        file_version, producer = gdx.gdxFileVersion(gdx_h)[1:]</div>
<div class="line">        print(f<span class="stringliteral">&quot;GDX file written using version: {file_version}&quot;</span>)</div>
<div class="line">        print(f<span class="stringliteral">&quot;GDX file written by: {producer}&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        rc, sym_nr = gdx.gdxFindSymbol(gdx_h, <span class="stringliteral">&quot;x&quot;</span>)</div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> rc:</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Symbol x not found&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        dim, sym_type = gdx.gdxSymbolInfo(gdx_h, sym_nr)[2:]</div>
<div class="line">        <span class="keywordflow">if</span> dim != 2 <span class="keywordflow">or</span> sym_type != gdx.GMS_DT_VAR:</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(</div>
<div class="line">                f<span class="stringliteral">&quot;x is not a two dimensional variable:\ndim = {dim}\ntype = {sym_type}&quot;</span></div>
<div class="line">            )</div>
<div class="line"> </div>
<div class="line">        rc, nr_recs = gdx.gdxDataReadStrStart(gdx_h, sym_nr)</div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> rc:</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(</div>
<div class="line">                f<span class="stringliteral">&quot;Error in gdxDataReadStrStart: {gdx.gdxErrorStr(gdx_h, gdx.gdxGetLastError(gdx_h))[1]}&quot;</span></div>
<div class="line">            )</div>
<div class="line"> </div>
<div class="line">        print(f<span class="stringliteral">&quot;Variable x has {nr_recs} records&quot;</span>)</div>
<div class="line">        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(nr_recs):</div>
<div class="line">            rc, elements, values, afdim = gdx.gdxDataReadStr(gdx_h)</div>
<div class="line">            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rc:</div>
<div class="line">                <span class="keywordflow">raise</span> Exception(</div>
<div class="line">                    f<span class="stringliteral">&quot;Error in gdxDataReadStr: {gdx.gdxErrorStr(gdx_h, gdx.gdxGetLastError(gdx_h))[1]}&quot;</span></div>
<div class="line">                )</div>
<div class="line">            level = values[gdx.GMS_VAL_LEVEL]</div>
<div class="line">            <span class="keywordflow">if</span> level != 0:</div>
<div class="line">                elements = [elements[d] <span class="keywordflow">for</span> d <span class="keywordflow">in</span> range(dim)]</div>
<div class="line">                print(f<span class="stringliteral">&quot;{&#39;.&#39;.join(elements)} = {level}&quot;</span>)</div>
<div class="line">        print(<span class="stringliteral">&quot;All solution values shown&quot;</span>)</div>
<div class="line">        gdx.gdxDataReadDone(gdx_h)</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> gdx.gdxClose(gdx_h):</div>
<div class="line">        <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Error in gdxClose&quot;</span>)</div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> gdx.gdxFree(gdx_h):</div>
<div class="line">        <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Error in gdxFree&quot;</span>)</div>
<div class="line">    print(<span class="stringliteral">&quot;All done&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Example 7 (C#)</h2>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="comment">// This program generates demand data for a modified version //</span></div>
<div class="line"><span class="comment">// of the trnsport model or reads the solution back from a   //</span></div>
<div class="line"><span class="comment">// gdx file.                                                 //</span></div>
<div class="line"><span class="comment">//                                                           //</span></div>
<div class="line"><span class="comment">// Calling convention:                                       //</span></div>
<div class="line"><span class="comment">// Case 1:                                                   //</span></div>
<div class="line"><span class="comment">//    Parameter 1: GAMS system directory                     //</span></div>
<div class="line"><span class="comment">// The program creates a GDX file with demand data           //</span></div>
<div class="line"><span class="comment">// Case 2:                                                   //</span></div>
<div class="line"><span class="comment">//    Parameter 1: GAMS system directory                     //</span></div>
<div class="line"><span class="comment">//    Parameter 2: gdxfile                                   //</span></div>
<div class="line"><span class="comment">// The program reads the solution from the GDX file          //</span></div>
<div class="line"><span class="comment">// Paul van der Eijk Jun-12, 2002                            //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keyword">using </span>System;</div>
<div class="line"><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><span class="keyword">using </span>System.Linq;</div>
<div class="line"><span class="keyword">using </span>System.Text;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>xp_example1</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">class </span>xp_example1</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">static</span> gdxcs gdx;</div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">void</span> ReportGDXError()</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">string</span> S = <span class="keywordtype">string</span>.Empty;</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;**** Fatal GDX Error&quot;</span>);</div>
<div class="line">            gdx.gdxErrorStr(gdx.gdxGetLastError(), ref S);</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;**** &quot;</span> + S);</div>
<div class="line">            Environment.Exit(1);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">void</span> ReportIOError(<span class="keywordtype">int</span> N)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;**** Fatal I/O Error = &quot;</span> + N);</div>
<div class="line">            Environment.Exit(1);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">void</span> WriteData(<span class="keywordtype">string</span> s, <span class="keywordtype">double</span> V)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">string</span>[] Indx = <span class="keyword">new</span> <span class="keywordtype">string</span>[gamsglobals.maxdim];</div>
<div class="line">            <span class="keywordtype">double</span>[] Values = <span class="keyword">new</span> <span class="keywordtype">double</span>[gamsglobals.val_max];</div>
<div class="line">            Indx[0] = s;</div>
<div class="line">            Values[gamsglobals.val_level] = V;</div>
<div class="line">            gdx.gdxDataWriteStr(Indx, Values);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">int</span> Main(<span class="keywordtype">string</span>[] args)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">string</span> Msg = <span class="keywordtype">string</span>.Empty;</div>
<div class="line">            <span class="keywordtype">string</span> Sysdir;</div>
<div class="line">            <span class="keywordtype">string</span> Producer = <span class="keywordtype">string</span>.Empty;</div>
<div class="line">            <span class="keywordtype">int</span> ErrNr = 0;</div>
<div class="line">            <span class="keywordtype">int</span> rc;</div>
<div class="line">            <span class="keywordtype">string</span>[] Indx = <span class="keyword">new</span> <span class="keywordtype">string</span>[gamsglobals.maxdim];</div>
<div class="line">            <span class="keywordtype">double</span>[] Values = <span class="keyword">new</span> <span class="keywordtype">double</span>[gamsglobals.val_max];</div>
<div class="line">            <span class="keywordtype">int</span> VarNr = 0;</div>
<div class="line">            <span class="keywordtype">int</span> NrRecs = 0;</div>
<div class="line">            <span class="keywordtype">int</span> N = 0;</div>
<div class="line">            <span class="keywordtype">int</span> Dimen = 0;</div>
<div class="line">            <span class="keywordtype">string</span> VarName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line">            <span class="keywordtype">int</span> VarTyp = 0;</div>
<div class="line">            <span class="keywordtype">int</span> D;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (Environment.GetCommandLineArgs().Length != 2 &amp;&amp; Environment.GetCommandLineArgs().Length != 3)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;**** XP_Example1: incorrect number of parameters&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> 1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            String[] arguments = Environment.GetCommandLineArgs();</div>
<div class="line">            Sysdir = arguments[1];</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;XP_Example1 using GAMS system directory: &quot;</span> + Sysdir);</div>
<div class="line"> </div>
<div class="line">            gdx = <span class="keyword">new</span> gdxcs(Sysdir, ref Msg);</div>
<div class="line">            <span class="keywordflow">if</span> (Msg != <span class="keywordtype">string</span>.Empty)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;**** Could not load GDX library&quot;</span>);</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;**** &quot;</span> + Msg);</div>
<div class="line">                <span class="keywordflow">return</span> 1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            gdx.gdxGetDLLVersion(ref Msg);</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Using GDX DLL version: &quot;</span> + Msg);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (Environment.GetCommandLineArgs().Length == 2)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//write demand data</span></div>
<div class="line">                gdx.gdxOpenWrite(<span class="stringliteral">&quot;demanddata.gdx&quot;</span>, <span class="stringliteral">&quot;xp_example1&quot;</span>, ref ErrNr);</div>
<div class="line">                <span class="keywordflow">if</span> (ErrNr != 0) xp_example1.ReportIOError(ErrNr);</div>
<div class="line">                <span class="keywordflow">if</span> (gdx.gdxDataWriteStrStart(<span class="stringliteral">&quot;Demand&quot;</span>, <span class="stringliteral">&quot;Demand data&quot;</span>, 1, gamsglobals.dt_par, 0) == 0) ReportGDXError();</div>
<div class="line">                WriteData(<span class="stringliteral">&quot;New-York&quot;</span>, 324.0);</div>
<div class="line">                WriteData(<span class="stringliteral">&quot;Chicago&quot;</span>, 299.0);</div>
<div class="line">                WriteData(<span class="stringliteral">&quot;Topeka&quot;</span>, 274.0);</div>
<div class="line">                <span class="keywordflow">if</span> (gdx.gdxDataWriteDone() == 0) ReportGDXError();</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Demand data written by xp_example1&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                rc = gdx.gdxOpenRead(arguments[2], ref ErrNr);</div>
<div class="line">                <span class="keywordflow">if</span> (ErrNr != 0) ReportIOError(ErrNr);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">//read x variable back (non-default level values only)</span></div>
<div class="line">                gdx.gdxFileVersion(ref Msg, ref Producer);</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;GDX file written using version: &quot;</span> + Msg);</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;GDX file written by: &quot;</span> + Producer);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (gdx.gdxFindSymbol(<span class="stringliteral">&quot;x&quot;</span>, ref VarNr) == 0)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;**** Could not find variable X&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> 1;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                gdx.gdxSymbolInfo(VarNr, ref VarName, ref Dimen, ref VarTyp);</div>
<div class="line">                <span class="keywordflow">if</span> (Dimen != 2 || VarTyp != gamsglobals.dt_var)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;**** X is not a two dimensional variable&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> 1;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (gdx.gdxDataReadStrStart(VarNr, ref NrRecs) == 0) ReportGDXError();</div>
<div class="line"> </div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Variable X has &quot;</span> + NrRecs + <span class="stringliteral">&quot; records&quot;</span>);</div>
<div class="line">                <span class="keywordflow">while</span> (gdx.gdxDataReadStr(ref Indx, ref Values, ref N) != 0)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>(Values[gamsglobals.val_level] == 0.0) <span class="comment">//skip level = 0.0 is default</span></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    <span class="keywordflow">for</span> (D=0; D&lt;Dimen; D++)</div>
<div class="line">                    {</div>
<div class="line">                        Console.Write(Indx[D]);</div>
<div class="line">                        <span class="keywordflow">if</span> (D &lt; Dimen-1) Console.Write(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line">                    }</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot; = &quot;</span> + Values[gamsglobals.val_level]);</div>
<div class="line">                }</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;All solution values shown&quot;</span>);</div>
<div class="line">                gdx.gdxDataReadDone();</div>
<div class="line">            }</div>
<div class="line">            ErrNr = gdx.gdxClose();</div>
<div class="line">            <span class="keywordflow">if</span> (ErrNr != 0) ReportIOError(ErrNr);</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md27"></a>
Example 8 (Java)</h2>
<div class="fragment"><div class="line"><span class="keyword">package </span>com.gams.xp_examples;</div>
<div class="line"><span class="keyword">import</span> com.gams.api.*;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>xp_example1 {</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> maxdim = 20;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> val_level    = 0;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> val_marginal = 1;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> val_lower    = 2;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> val_upper    = 3;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> val_scale    = 4;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> val_max      = 5;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> dt_set   = 0;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> dt_par   = 1;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> dt_var   = 2;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> dt_equ   = 3;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> dt_alias = 4;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> dt_max   = 5;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> gdx gdxio = <span class="keyword">new</span> gdx();</div>
<div class="line"><span class="keyword">static</span> String[] Indx = <span class="keyword">new</span> String[maxdim];</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">double</span>[] Values = <span class="keyword">new</span> <span class="keywordtype">double</span>[val_max];</div>
<div class="line">    </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> ReportGDXError() {</div>
<div class="line">  String[] S = <span class="keyword">new</span> String[1];</div>
<div class="line"> </div>
<div class="line">  System.out.println(<span class="stringliteral">&quot;**** Fatal GDX Error&quot;</span>);</div>
<div class="line">  gdxio.ErrorStr(gdxio.GetLastError(), S);</div>
<div class="line">  System.out.println(<span class="stringliteral">&quot;**** &quot;</span> + S[0]);</div>
<div class="line">  System.exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> ReportIOError(<span class="keywordtype">int</span> N, String msg ) {</div>
<div class="line">  System.out.println(<span class="stringliteral">&quot;**** Fatal I/O Error = &quot;</span> + N + <span class="stringliteral">&quot; when calling &quot;</span> + msg);</div>
<div class="line">  System.exit(1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> WriteData(String s, <span class="keywordtype">double</span> V) {</div>
<div class="line">  Indx[0] = s;</div>
<div class="line">  Values[val_level] = V;</div>
<div class="line">  gdxio.DataWriteStr(Indx,Values);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> main (String[] args) {</div>
<div class="line"> </div>
<div class="line">  String[]    Msg = <span class="keyword">new</span> String[1];</div>
<div class="line">  String[]    Producer = <span class="keyword">new</span> String[1];</div>
<div class="line">  String      Sysdir;</div>
<div class="line">  <span class="keywordtype">int</span>[]       ErrNr = <span class="keyword">new</span> <span class="keywordtype">int</span>[1];</div>
<div class="line">  <span class="keywordtype">int</span>[]       VarNr = <span class="keyword">new</span> <span class="keywordtype">int</span>[1];</div>
<div class="line">  <span class="keywordtype">int</span>[]       NrRecs = <span class="keyword">new</span> <span class="keywordtype">int</span>[1];</div>
<div class="line">  <span class="keywordtype">int</span>[]       N = <span class="keyword">new</span> <span class="keywordtype">int</span>[1];</div>
<div class="line">  <span class="keywordtype">int</span>[]       Dim = <span class="keyword">new</span> <span class="keywordtype">int</span>[1];</div>
<div class="line">  String[]    VarName = <span class="keyword">new</span> String[1];</div>
<div class="line">  <span class="keywordtype">int</span>[]       VarTyp = <span class="keyword">new</span> <span class="keywordtype">int</span>[1];</div>
<div class="line">  <span class="keywordtype">int</span>         D;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (args.length &lt; 1 || args.length &gt; 2) {</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;**** Example1: incorrect number of parameters&quot;</span>);</div>
<div class="line">    System.exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  Sysdir = args[0];</div>
<div class="line">  System.out.println(<span class="stringliteral">&quot;Example1 using GAMS system directory: &quot;</span> + Sysdir);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (gdxio.CreateD(Sysdir, Msg) != 1) {</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;**** Could not load GDX library&quot;</span>);</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;**** &quot;</span> + Msg[0]);</div>
<div class="line">    System.exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  gdxio.GetDLLVersion(Msg);</div>
<div class="line">  System.out.println(<span class="stringliteral">&quot;Using GDX DLL version: &quot;</span> + Msg[0]);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (1 == args.length) {</div>
<div class="line">    <span class="comment">/* Write demand data */</span></div>
<div class="line">    gdxio.OpenWrite(<span class="stringliteral">&quot;demanddata.gdx&quot;</span>, <span class="stringliteral">&quot;example1&quot;</span>, ErrNr);</div>
<div class="line">    <span class="keywordflow">if</span> (ErrNr[0] != 0) ReportIOError(ErrNr[0],<span class="stringliteral">&quot;gdxOpenWrite&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (gdxio.DataWriteStrStart(<span class="stringliteral">&quot;Demand&quot;</span>,<span class="stringliteral">&quot;Demand data&quot;</span>,1,dt_par,0) != 1)</div>
<div class="line">      ReportGDXError();</div>
<div class="line">    WriteData(<span class="stringliteral">&quot;New-York&quot;</span>,324.0);</div>
<div class="line">    WriteData(<span class="stringliteral">&quot;Chicago&quot;</span> ,299.0);</div>
<div class="line">    WriteData(<span class="stringliteral">&quot;Topeka&quot;</span>  ,274.0);</div>
<div class="line">    <span class="keywordflow">if</span> (gdxio.DataWriteDone() != 1) ReportGDXError();</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;Demand data written by example1\n&quot;</span>);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    gdxio.OpenRead(args[1], ErrNr);</div>
<div class="line">    <span class="keywordflow">if</span> (ErrNr[0] != 0) ReportIOError(ErrNr[0],<span class="stringliteral">&quot;gdxOpenRead&quot;</span>);</div>
<div class="line">    gdxio.FileVersion(Msg,Producer);</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;GDX file written using version: &quot;</span> + Msg[0]);</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;GDX file written by: &quot;</span> + Producer[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (gdxio.FindSymbol(<span class="stringliteral">&quot;x&quot;</span>,VarNr) != 1) {</div>
<div class="line">      System.out.println(<span class="stringliteral">&quot;**** Could not find variable X&quot;</span>);</div>
<div class="line">      System.exit(1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    gdxio.SymbolInfo(VarNr[0],VarName,Dim,VarTyp);</div>
<div class="line">    <span class="keywordflow">if</span> (Dim[0] != 2 || dt_var != VarTyp[0]) {</div>
<div class="line">      System.out.println(<span class="stringliteral">&quot;**** X is not a two dimensional variable: &quot;</span> + Dim[0] + <span class="stringliteral">&quot;:&quot;</span> + VarTyp[0]);</div>
<div class="line">      System.exit(1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (gdxio.DataReadStrStart(VarNr[0],NrRecs) != 1) ReportGDXError();</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;Variable X has &quot;</span> + NrRecs[0] + <span class="stringliteral">&quot; records&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span> (gdxio.DataReadStr(Indx,Values,N) != 0) {</div>
<div class="line">      <span class="keywordflow">if</span> (0 == Values[val_level]) <span class="keywordflow">continue</span>; <span class="comment">/* skip level 0.0 is default */</span></div>
<div class="line">      <span class="keywordflow">for</span> (D=0; D&lt;Dim[0]; D++) {</div>
<div class="line">          System.out.print(Indx[D]);</div>
<div class="line">          <span class="keywordflow">if</span> (D&lt;Dim[0]-1) System.out.print(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">      System.out.println(<span class="stringliteral">&quot; = &quot;</span> + Values[val_level]);</div>
<div class="line">    }</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;All solution values shown&quot;</span>);</div>
<div class="line">    gdxio.DataReadDone();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  ErrNr[0] = gdxio.Close();</div>
<div class="line">  <span class="keywordflow">if</span> (ErrNr[0] != 0) ReportIOError(ErrNr[0],<span class="stringliteral">&quot;gdxClose&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (gdxio.Free() != 1) {</div>
<div class="line">    System.out.println(<span class="stringliteral">&quot;Problems unloading the GDX DLL&quot;</span>);</div>
<div class="line">    System.exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
